/**
 * @preserve
 * Flair.js
 * True Object Oriented JavaScript
 * 
 * Assembly: flair.app
 *     File: ./flair.app.js
 *  Version: 0.25.53
 *  Sun, 17 Mar 2019 20:42:37 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * Licensed under MIT
 */
(()=>{"use strict";const e=void 0!==!0?require("flairjs"):"undefined"!=typeof WorkerGlobalScope?WorkerGlobalScope.flair:(!0).flair,{Class:t,Struct:i,Enum:r,Interface:s,Mixin:o}=e,{Aspects:n}=e,{AppDomain:a}=e,l=e.AppDomain.context.current().name,{$$:c,attr:p}=e,{bring:f,Container:d,include:u}=e,{Port:y}=e,{on:w,post:v,telemetry:h}=e,{Reflector:m}=e,{Serializer:b}=e,{Tasks:g}=e,{TaskInfo:$}=e.Tasks,{as:A,is:S,isComplies:C,isDerivedFrom:k,isImplements:D,isInstanceOf:I,isMixed:B}=e,{getAssembly:O,getAttr:M,getContext:E,getResource:j,getRoute:L,getType:T,ns:H,getTypeOf:W,typeOf:x}=e,{dispose:P,using:z}=e,{Args:F,Exception:R,noop:G,nip:V,nim:J,nie:U,event:q}=e,{env:N}=e.options,{forEachAsync:K,replaceAll:Q,splitAndTrim:X,findIndexByProp:Y,findItemByProp:Z,which:_,isArrowFunc:ee,isASyncFunc:te,sieve:ie,b64EncodeUnicode:re,b64DecodeUnicode:se}=e.utils,{$static:oe,$abstract:ne,$virtual:ae,$override:le,$sealed:ce,$private:pe,$privateSet:fe,$protected:de,$protectedSet:ue,$readonly:ye,$async:we}=c,{$enumerate:ve,$dispose:he,$post:me,$on:be,$timer:ge,$type:$e,$args:Ae,$inject:Se,$resource:Ce,$asset:ke,$singleton:De,$serialize:Ie,$deprecate:Be,$session:Oe,$state:Me,$conditional:Ee,$noserialize:je,$ns:Le}=c;let Te=JSON.parse('{"host":"flair.server.Server | flair.client.Client","app":"flair.server.App ~ flair.server.WorkerApp | flair.client.App ~ flair.client.WorkerApp","load":[],"container":{}}'),He=e.Port("settingsReader");if("function"==typeof He){let e=He("flair.app");e&&(Te=Object.assign(Te,e))}Te=Object.freeze(Te),e.AppDomain.context.current().currentAssemblyBeingLoaded("./flair.app{.min}.js"),(async()=>{const{Bootware:e}=H();c("static"),c("ns","(root)"),t("BootEngine",function(){this.start=(async t=>{let i=[],r=[];const s=()=>{a.entryPoint(t)},o=async()=>{let e=null,t=null,s=null;for(let o of Te.load)(o=_(o))&&(e=await u(o))&&(t=A(e,t))&&(s=new t,i.push(s),s.info.isMountSpecific&&r.push(s))},n=async e=>{if(N.isWorker){0!==r.length&&console.warn("Mount specific bootwares are not supported for worker environment. Revisit worker:flair.app->load setting.");for(let t of i)t.info.isMountSpecific||await t[e]()}else{let t=a.host().mounts,s=Object.keys(t),o="",n=null;n=t[o="main"];for(let t of i)await t[e](o,n);for(let i of s)if("main"!==i){n=t[i];for(let t of r)await t[e](i,n)}}},l=async()=>{if(!N.isWorker){let t=_(Te.host),i=A(await u(t),e),r=null;if(!i)throw R.InvalidDefinition(t,this.start);r=new i,await r.boot(),a.host(r)}await n("boot");let t=_(Te.app),i=A(await u(t),e),r=null;if(!i)throw R.InvalidDefinition(t,this.start);r=new i,await r.boot(),a.app(r)},c=async()=>{N.isWorker||await a.host().start(),await a.app().start()},p=()=>new Promise((e,t)=>{N.global.document.addEventListener("DOMContentLoaded",e)}),f=()=>new Promise((e,t)=>{document.addEventListener("deviceready",e,!1)}),d=async()=>{N.isClient&&!N.isWorker&&(await p(),N.isCordova&&await f()),N.isWorker||await a.host().ready(),await n("ready"),await a.app().ready()};s(),await o(),await l(),await c(),await d()})})})(),(async()=>{c("abstract"),c("ns","(root)"),t("Bootware",function(){c("virtual"),this.construct=((e,t,i)=>{let r=F("name: string, version: string","name: string, version: string, isMountSpecific: boolean","name: string, isMountSpecific: boolean","name: string")(e,t,i);r.throwOnError(this.construct),this.info=Object.freeze({name:r.name||"",version:r.version||"",isMountSpecific:r.isMountSpecific||!1})}),c("virtual"),c("async"),this.boot=G,c("readonly"),this.info=null,c("virtual"),c("async"),this.ready=G})})(),(async()=>{c("ns","(root)"),o("LifeCycleHandler",function(){c("virtual"),this.start=(async()=>{this.isStarted=!0}),c("virtual"),this.stop=(async()=>{this.isStarted=!1}),c("privateSet"),c("type","boolean"),this.isStarted=!1,this.restart=(async()=>{await this.stop(),await this.start()}),c("virtual"),this.dispose=G})})(),(async()=>{const{IDisposable:e,Bootware:i,LifeCycleHandler:r}=H();c("ns","flair.boot"),t("App",i,[r,e],function(){c("override"),this.construct=(e=>{let t=O(this);e(t.title,t.version)}),c("virtual"),this.dispose=G,c("virtual"),this.onError=(e=>{throw R.OperationFailed(e,this.onError)})})})(),(async()=>{const{IDisposable:e,Bootware:i,LifeCycleHandler:r}=H();c("ns","flair.boot"),t("ClientHost",i,[r,e],function(){c("virtual"),this.dispose=G})})(),(async()=>{const{IDisposable:e,Bootware:i,LifeCycleHandler:r}=H();c("ns","flair.boot"),t("ServerHost",i,[r,e],function(){c("virtual"),this.dispose=G})})(),(async()=>{const{Bootware:e}=H();c("sealed"),c("ns","flair.bw"),t("DIContainer",e,function(){c("override"),this.construct=(e=>{e("DI Container")}),c("override"),this.boot=(async()=>{let e=Te.container;for(let t in e)e.hasOwnProperty(t)&&d.register(t,e[t])})})})(),e.AppDomain.context.current().currentAssemblyBeingLoaded(""),e.AppDomain.registerAdo('{"name":"flair.app","file":"./flair.app{.min}.js","desc":"True Object Oriented JavaScript","title":"Flair.js","version":"0.25.53","lupdate":"Sun, 17 Mar 2019 20:42:37 GMT","builder":{"name":"<<name>>","version":"<<version>>","format":"fasm","formatVersion":"1","contains":["initializer","types","enclosureVars","enclosedTypes","resources","assets","routes","selfreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["BootEngine","Bootware","LifeCycleHandler","flair.boot.App","flair.boot.ClientHost","flair.boot.ServerHost","flair.bw.DIContainer"],"resources":[],"assets":[],"routes":[]}')})();
//# sourceMappingURL=./flair.app.min.js.map