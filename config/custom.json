{
    "plugins": [
        { "name": "docker_image", "file": "docker_image.js", "settings": { "cmd": "" } },
        { "name": "node_modules", "file": "node_modules.js", "settings": { "cmd": "yarn install --prod" } },
        { "name": "web_modules", "file": "web_modules.js" },
        { "name": "copy_files", "file": "copy_files.js" },
        { "name": "minify_files", "file": "minify_files.js" }
    ],    
    "build": [
        { "profile": "server" },
        { "profile": "client" }
    ],
    "profiles": {
        "server": {
            "root": "server",
            "dest": "/",
            "skipMinify": true,
            "build": [
                "app"
            ],
            "plugins": ["copy_files", "node_modules"],
            "copy": [
                "appConfig.json",
                "main.js",
                "private"
            ]
        },
        "client": {
            "root": "www",
            "dest": "@server",
            "omitRoot": true,
            "build": [
                "app"
            ],
            "plugins": ["copy_files", "web_modules", "minify_files"],
            "copy": [
                "assets",
                "favicon.png",
                "webConfig.json",
                "index.html",
                "index.js"
            ],
            "modules": [
                "flairjs",
                "requirejs",
                "vue/dist"
            ],
            "minify": [
                "modules/requirejs/require.js"
            ]
        }
    }
}